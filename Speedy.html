<html>
<head>
<meta name="viewport" content="user-scalable=no">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Maven+Pro&display=swap" rel="stylesheet">
<link rel="stylesheet" href="Speedy.css">

<script>
function refresh(){
history.go(0);
}
</script>

<script>
if(window.addEventListener){
window.addEventListener('load', InitiateSpeedDetection, false);
}

else if(window.attachEvent){
window.attachEvent('onload', InitiateSpeedDetection);
}

function ShowProgressMessage(msg){
if(document.getElementById("progress")){
document.getElementById("progress").innerHTML = msg;
}
}

function showResultMessage(msg){
document.getElementById("result").innerHTML = msg;
}

function InitiateSpeedDetection(){
ShowProgressMessage("");
window.setTimeout(MeasureConnectionSpeed, 1);
};

function MeasureConnectionSpeed(){
document.getElementById("test").style.animation="hide 0.7s ease-out";
setTimeout(()=>{
document.getElementById("test").style.display="none";
},669)
var startTime, endTime;
var download = new Image();
download.onload = function(){
endTime = (new Date()).getTime();
showResults();
}
download.onerror = function (){
document.getElementById("container").style.opacity="0";
document.getElementById("test2").style.opacity="1";
document.getElementById("no").style.right="62%";
document.getElementById("no").style.opacity="1";
document.getElementById("internet").style.left="40%";
document.getElementById("internet").style.opacity="1";
setTimeout(()=>{
document.getElementById("p").style.transform="translateY(64px)";
document.getElementById("p").style.opacity="1";
},400)
}
startTime = (new Date()).getTime();
var cacheBuster = "?nnn=" + startTime;
download.src = "https://4k-uhd.nl/wp-content/uploads/2018/08/4K-3840x2160-Wallpaper-Uitzicht-5.jpg" + cacheBuster;
function showResults(){
var duration = (endTime - startTime) / 1000;
showResultMessage("<center id='speed'>" + (((6000000 * 8 / duration).toFixed(2) / 1024).toFixed(2) / 1024).toFixed(2) + "</center>");
setTimeout(()=>{
document.getElementById("container").style.display="none";
},969)
document.getElementById("test").style.display="block";
document.getElementById("test").style.animation="show 0.7s ease-out";
setTimeout(()=>{
document.getElementById("test").style.opacity="0";
document.getElementById("test2").style.opacity="1";
},700)
document.getElementById("result").style.transform="translateY(0)";
document.getElementById("mbps").style.fontSize="345%";
document.getElementById("hr").style.width="90%";
document.getElementById("hr").style.opacity="1";
}
}
</script>
</head>
<body bgcolor="#000018">
<center class="card">
<i class="message" id="progress"></i>
<center class="result" id="result">
</center><span id="mbps">Megabits Per Second</span><hr color="orangered" id="hr"></center>
<div id="container"><div class="dots"></div></div>
<div id="info">
<center class="fa fa-info-circle" id="center"></center>
<br>
<li>This test downloads data more than 5MB, data charges may apply.</li>
<br>
<li>This will take 1-2 minutes on an average. It can take even more time if your internet is slow.</li>
</div>
<center id="nonet"><span id="no">No </span><span id="internet">Internet!</span><p id="p">Try to turn on Mobile Data or Wi-Fi and then click TEST AGAIN.</p></center>
<center id="test"><span onclick="refresh()" id="i"> TEST AGAIN </span></center>
<center id="test2"><span onclick="refresh()" id="i"> TEST AGAIN </span></center>

<div id="Alert"><center id="alert">Calculating internet speed...</center></div>
</body>
</html>